<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Inventurâ€‘Check Admin</title>
<style>
body{font-family:system-ui,Roboto,Arial,sans-serif;margin:0;background:#f8fafc;color:#111827}
.wrap{max-width:900px;margin:0 auto;padding:24px}
.card{background:#fff;border:1px solid #e5e7eb;border-radius:16px;padding:20px;box-shadow:0 4px 12px rgba(0,0,0,.05)}
.btn{cursor:pointer;background:#00aeef;color:#fff;border:none;padding:12px 18px;border-radius:10px;font-weight:600}
.btn:hover{opacity:.9}
.status-box{background:#00aeef;color:#fff;border-radius:10px;padding:12px 16px;margin-bottom:16px;font-size:.95rem;box-shadow:0 2px 6px rgba(0,0,0,0.15);position:sticky;top:10px;z-index:9}
.status-box strong{font-weight:700}
.repo-info{font-family:monospace}
.note{font-size:.9rem;color:#444}
.admin .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.admin label{display:flex;flex-direction:column;gap:6px}
.admin input{border:1px solid #ccc;border-radius:8px;padding:10px}
.table{width:100%;border-collapse:collapse;margin-top:16px}
.table th,.table td{border:1px solid #ddd;padding:6px 8px;text-align:left}
</style>
</head>
<body>
<div class="wrap">
  <h1>âš™ï¸ AdminÂ â€“Â PlanÂ verwalten</h1>
  <section class="status-box" id="ghStatus">
    <strong>ğŸ”„ Verbindung wird geprÃ¼ftÂ â€¦</strong><br>
    <span class="repo-info">tstboenen/inventur-checkÂ (main/rules.json)</span><br>
    ğŸ’¾Â DatenÂ werdenÂ zentralÂ imÂ GitHubâ€‘RepositoryÂ gespeichert,Â nichtÂ lokal.
  </section>

  <section class="card admin">
    <div class="row">
      <label>PIN<input id="pinLogin" type="password" placeholder="z.â€¯B.Â 4927"/></label>
      <label>GitHubÂ Token<input id="ghToken" type="password" placeholder="github_pat_â€¦"/></label>
    </div>
    <div class="row">
      <label>Owner<input id="ghOwner" type="text" value="tstboenen"/></label>
      <label>Repo<input id="ghRepo" type="text" value="inventur-check"/></label>
    </div>
    <div class="row">
      <label>Branch<input id="ghBranch" type="text" value="main"/></label>
      <label>Pfad<input id="ghPath" type="text" value="rules.json"/></label>
    </div>
    <div style="margin-top:12px;display:flex;gap:12px;flex-wrap:wrap">
      <button class="btn" id="btnLogin">ğŸ”Â Anmelden</button>
      <button class="btn" id="btnCreatePin">ğŸ†•Â PINÂ anlegen</button>
      <button class="btn" id="btnSave">ğŸ’¾Â RegelnÂ speichernÂ (GitHub)</button>
    </div>
    <p class="note">HierÂ verwaltstÂ duÂ dieÂ Inventurâ€‘RegelnÂ (DatumsbereichÂ +Â Schichten).Â AlleÂ Ã„nderungenÂ werdenÂ direktÂ inÂ <code>rules.json</code>Â imÂ GitHubâ€‘RepositoryÂ gespeichert.</p>
    <table class="table" id="ruleTable">
      <thead><tr><th>#</th><th>Start</th><th>Ende</th><th>FrÃ¼h</th><th>SpÃ¤t</th><th>Nacht</th><th>Notiz</th></tr></thead>
      <tbody></tbody>
    </table>
  </section>
</div>
<script>
const statusBox=document.getElementById('ghStatus');
async function checkGitHub(){
  statusBox.innerHTML='<strong>ğŸ”„Â VerbindungÂ wirdÂ geprÃ¼ftÂ â€¦</strong><br><span class="repo-info">tstboenen/inventur-checkÂ (main/rules.json)</span><br>ğŸ’¾Â DatenÂ werdenÂ zentralÂ imÂ GitHubâ€‘RepositoryÂ gespeichert,Â nichtÂ lokal.';
  try{
    const r=await fetch('https://api.github.com/repos/tstboenen/inventur-check/contents/rules.json?ref=main',{cache:'no-store'});
    if(r.ok){
      statusBox.innerHTML='<strong>âœ…Â VerbundenÂ mitÂ GitHub</strong><br><span class="repo-info">tstboenen/inventur-checkÂ (main/rules.json)</span><br>ğŸ’¾Â DatenÂ werdenÂ zentralÂ imÂ GitHubâ€‘RepositoryÂ gespeichert,Â nichtÂ lokal.';
    }else{
      statusBox.innerHTML='<strong>âŒÂ KeineÂ Verbindung!Â ('+(r.status)+')</strong><br>PrÃ¼feÂ TokenÂ oderÂ RepositoryÂ Zugriff.';
    }
  }catch(e){
    statusBox.innerHTML='<strong>âŒÂ KeineÂ Verbindung!</strong><br>PrÃ¼feÂ InternetÂ oderÂ GitHubâ€‘Zugriff.';
  }
}
checkGitHub();
setInterval(checkGitHub,60000);
</script>
</body>
</html>
